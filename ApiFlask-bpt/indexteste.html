<!DOCTYPE html>
<html>
<head>
    <title>Consumir API Flask</title>
</head>
<body>
    <h1>Consumir API Flask</h1>
    <button onclick="fazerRequisicao()">Fazer Solicitação</button>

    <div id="resultado"></div>

    <iframe id="iframe" frameBorder="0" height="300" width="1000">
       
    </iframe>

    <script>
        async function fazerRequisicao() {
            var data = {
                sex: "Male",
                redo: "Yes",
                cpb: "Yes",
                age: 1.0,
                bsa: 1.0,
                hb: 1.0
            };
            const request = {
                method: "POST",
                headers: {
                    "Content-Type": "application/json;charset=UTF-8"
                },
                body: JSON.stringify(data)
            }
            // Faça uma solicitação AJAX para a API Flask
            const response = await fetch("http://127.0.0.1:5000/predict", request);
            if (response.status == 200){
                //document.getElementById("resultado").innerHTML = "Previsão: " + resposta.prediction;
                const resposta = await response.json()
                console.log(resposta.prediction)
                document.getElementById("iframe").srcdoc = resposta.lime;
            }
        }
    </script>
</body>
</html>
